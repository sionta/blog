{% comment %}
  RESTRICTIONS for "compress.html"
    - Whitespaces inside of the textarea element are squeezed. Please donâ€™t use the layout on pages with non-empty textarea.
    - Inline JS can become broken where // comments used. Please remove the comments or change to /**/ style.
    - Invalid markup can lead to unexpected results. Please make sure your markup is valid before.
{% endcomment %}

{% assign js_vendor = '/assets/js/vendor' | relative_url %}
{% if page.path contains '_posts' or page.layout == 'post' %}
  {% if page.anchor %}
    <script type="text/javascript" src="{{- js_vendor -}}/anchor.min.js"></script>
    <script type="text/javascript">
      const anchors = new AnchorJS();
      const options = {
        level: [2, 3],
        placement: 'right',
        visible: 'hover',
      };
      anchors.add('h2, h3', options);
    </script>
  {% endif %}
  {% if page.diagram %}
    <script type="text/javascript" src="{{- js_vendor -}}/mermaid.min.js"></script>
    <script type="text/javascript">
      const mermaidConfig = {
        startOnLoad: true,
        theme: 'neutral',
      };
      mermaid.initialize(mermaidConfig);
      const mermaidElements = document.querySelectorAll('.language-mermaid');
      mermaidElements.forEach((element) => {
        mermaid.init(undefined, element);
      });
    </script>
  {% endif %}
{% endif %}
